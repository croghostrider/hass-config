# TODO: check that source is not AirPlay here
switch:
  - platform: template
    switches:
      television:
        friendly_name: Television
        value_template: "{{ is_state('media_player.receiver', 'on') }}"
        turn_on:
          service: script.tv_turn_on
        turn_off:
          service: script.tv_turn_off

script:
  tv_set_hdmi1:
    alias: Change TV input to HDMI1
    sequence:
      - service: switch.broadlink_send_packet_10_0_10_31
        data:
          packet:
            - "JgDMAHI5Dg4OKw4PDw0ODg8ODg4QDQ4ODg8ODg4ODg8OKw4ODg4PDg4ODg8ODg4PDg4ODg4rDg8ODg4OEA0ODg4PDg4ODw4qDg8OKw4ODg8ODg4ODg8OKw4ODisODg4PDg4ODw4qDgAJfXI5Dg4OKxAMDw4ODg4PDg4ODw4ODg4QDQ4ODg8OKg8ODg4ODw4ODg8ODg4ODw4ODg4rDg8ODhAMDg8ODg4PDg4ODg8qEA0OKw4OEAwODw4ODg8OKhANDisODg4PDg4ODg4rEAANBQAAAAAAAAAAAAAAAA=="
      - service: switch.broadlink_send_packet_10_0_10_31
        data:
          packet:
            - "JgDMAHI5Dg4PKg4PDg4ODw4ODg4ODw4ODg8ODg4ODw4OKw4ODg8ODg4ODg8ODg4PDg4ODw4qDg8ODg4PDg4ODhANDg4ODw4rDg4ODg4rDg8ODg4rDg4OKw4PDg4OKw4ODg8OKg8qDgAJdnI5Dg8OKw4ODg4ODw4ODg8ODg4ODw4ODg4PDg4OKxAMDg8ODg4PDg4ODg8ODg4ODw4rDg4ODg8ODg4ODw4ODg8ODg4rDg4ODw4qDw4ODg4rDg8OKg4PDg4OKw4ODw4OKw4rDgANBQAAAAAAAAAAAAAAAA=="

  tv_on_off:
    alias: Television on/off
    sequence:
      - service: switch.broadlink_send_packet_10_0_10_31
        data:
          packet:
             - "JgCEAxANEAwQDRAMEAwRKBANEAwQDBEMEAwQDRAMEA0QDBApEAwQDRAMEAwRDBAMEQwQDBApEAwRKBApECkQKRAMEA0QKBEMECkQKRAoESgQDRApEAAJdnQ3EA0QKRAMEAwRDBAMEA0QDBAMEQwQDBEMEAwQKRAMEQwQDBANEAwQDRAMEAwRDBApEAwQDBEMEAwQDRAMEA0QDBApEAwQKRApECkQKRAMEAwRKBANECgRKBEoECkQDBEoEAAJd3Q3EAwRKBEMEAwQDRAMEAwRDBAMEA0QDBAMEQwQKRAMEA0QDBAMEQwQDBANEAwQDRAoEQwQDBANEAwQDBEMEAwQDRApEAwQKRApECgRKBEMEAwQKRAMESgQKRApECkQDBApEAAJd3Q3EAwQKRANEAwQDBEMEAwQDRAMEAwRDBAMEA0QKRAMEAwRDBAMEA0QDBAMEQwQDBApEA0QDBAMEQwQDBANEAwQDRAoEQwQKRAoESgQKRANEAwQKRAMECkQKRApECkQDBApEAAJd3Q3EAwQKRAMEA0QDBANEAwQDBEMEAwQDRAMEAwRKBEMEAwQDRAMEAwRDBAMEA0QDBApEAwRDBAMEA0QDBAMEQwQDBApEA0QKBEoECkQKRAMEQwQKRAMECkQKRAoESgRDBApEAAJd3M3EQwQKRAMEA0QDBAMEA0QDBANEAwQDBEMEAwQKRANEAwQDBEMEAwQDRAMEAwRDBApEAwQDRAMEAwRDBAMEA0QDBApEAwQKRApECkQKRAMEAwRKBEMECkQKBEoECkQDRAoEQAJdnQ3EA0QKBEMEAwQDRAMEA0QDBAMEQwQDBANEAwQKRAMEA0QDBANEAwQDBEMEAwQDRApEAwQDBEMEAwQDRAMEAwRDBApEAwQKRApECkQKBEMEAwQKRANECgRKBApECkQDBEoEAAJd3Q3EAwRKBANEAwQDBEMEAwRDBAMEA0QDBAMEQwQKRAMEAwRDBAMEQwQDBANEAwQDBEoEA0QDBANEAwQDBEMEAwQDRAoEQwQKRApECgRKBANEAwQKRAMESgQKRApECkQDBApEAAJd3Q3EAwQKRAMEQwQDBANEAwQDBEMEAwRDBAMEA0QKBEMEAwQDRAMEA0QDBAMEQwQDBApEAwRDBAMEA0QDBANEAwQDBEoEA0QKRAoESgQKRAMEQwQKRAMECkQKRApECgRDBApEAANBQAAAAA="

  tv_turn_on:
    alias: Television and Apple TV on
    sequence:
      - service: switch.broadlink_send_packet_10_0_10_31
        data:
          packet:
            - "JgCEAxANEAwQDRAMEAwRKBANEAwQDBEMEAwQDRAMEA0QDBApEAwQDRAMEAwRDBAMEQwQDBApEAwRKBApECkQKRAMEA0QKBEMECkQKRAoESgQDRApEAAJdnQ3EA0QKRAMEAwRDBAMEA0QDBAMEQwQDBEMEAwQKRAMEQwQDBANEAwQDRAMEAwRDBApEAwQDBEMEAwQDRAMEA0QDBApEAwQKRApECkQKRAMEAwRKBANECgRKBEoECkQDBEoEAAJd3Q3EAwRKBEMEAwQDRAMEAwRDBAMEA0QDBAMEQwQKRAMEA0QDBAMEQwQDBANEAwQDRAoEQwQDBANEAwQDBEMEAwQDRApEAwQKRApECgRKBEMEAwQKRAMESgQKRApECkQDBApEAAJd3Q3EAwQKRANEAwQDBEMEAwQDRAMEAwRDBAMEA0QKRAMEAwRDBAMEA0QDBAMEQwQDBApEA0QDBAMEQwQDBANEAwQDRAoEQwQKRAoESgQKRANEAwQKRAMECkQKRApECkQDBApEAAJd3Q3EAwQKRAMEA0QDBANEAwQDBEMEAwQDRAMEAwRKBEMEAwQDRAMEAwRDBAMEA0QDBApEAwRDBAMEA0QDBAMEQwQDBApEA0QKBEoECkQKRAMEQwQKRAMECkQKRAoESgRDBApEAAJd3M3EQwQKRAMEA0QDBAMEA0QDBANEAwQDBEMEAwQKRANEAwQDBEMEAwQDRAMEAwRDBApEAwQDRAMEAwRDBAMEA0QDBApEAwQKRApECkQKRAMEAwRKBEMECkQKBEoECkQDRAoEQAJdnQ3EA0QKBEMEAwQDRAMEA0QDBAMEQwQDBANEAwQKRAMEA0QDBANEAwQDBEMEAwQDRApEAwQDBEMEAwQDRAMEAwRDBApEAwQKRApECkQKBEMEAwQKRANECgRKBApECkQDBEoEAAJd3Q3EAwRKBANEAwQDBEMEAwRDBAMEA0QDBAMEQwQKRAMEAwRDBAMEQwQDBANEAwQDBEoEA0QDBANEAwQDBEMEAwQDRAoEQwQKRApECgRKBANEAwQKRAMESgQKRApECkQDBApEAAJd3Q3EAwQKRAMEQwQDBANEAwQDBEMEAwRDBAMEA0QKBEMEAwQDRAMEA0QDBAMEQwQDBApEAwRDBAMEA0QDBANEAwQDBEoEA0QKRAoESgQKRAMEQwQKRAMECkQKRApECgRDBApEAANBQAAAAA="
      - delay: "00:00:07"
      - service: switch.broadlink_send_packet_10_0_10_31
        data:
          packet:
            - "JgDMAHI5Dg4OKw4PDw0ODg8ODg4QDQ4ODg8ODg4ODg8OKw4ODg4PDg4ODg8ODg4PDg4ODg4rDg8ODg4OEA0ODg4PDg4ODw4qDg8OKw4ODg8ODg4ODg8OKw4ODisODg4PDg4ODw4qDgAJfXI5Dg4OKxAMDw4ODg4PDg4ODw4ODg4QDQ4ODg8OKg8ODg4ODw4ODg8ODg4ODw4ODg4rDg8ODhAMDg8ODg4PDg4ODg8qEA0OKw4OEAwODw4ODg8OKhANDisODg4PDg4ODg4rEAANBQAAAAAAAAAAAAAAAA=="
      - service: switch.broadlink_send_packet_10_0_10_31
        data:
          packet:
            - "JgDMAHI5Dg4PKg4PDg4ODw4ODg4ODw4ODg8ODg4ODw4OKw4ODg8ODg4ODg8ODg4PDg4ODw4qDg8ODg4PDg4ODhANDg4ODw4rDg4ODg4rDg8ODg4rDg4OKw4PDg4OKw4ODg8OKg8qDgAJdnI5Dg8OKw4ODg4ODw4ODg8ODg4ODw4ODg4PDg4OKxAMDg8ODg4PDg4ODg8ODg4ODw4rDg4ODg8ODg4ODw4ODg8ODg4rDg4ODw4qDw4ODg4rDg8OKg4PDg4OKw4ODw4OKw4rDgANBQAAAAAAAAAAAAAAAA=="
      - service: media_player.turn_on
        data:
          entity_id: media_player.receiver
      - service: media_player.select_source
        data:
          entity_id: media_player.receiver
          source: HDMI2

  tv_turn_off:
    alias: Television off
    sequence:
      - service: switch.broadlink_send_packet_10_0_10_31
        data:
          packet:
            - "JgCEAxANEAwQDRAMEAwRKBANEAwQDBEMEAwQDRAMEA0QDBApEAwQDRAMEAwRDBAMEQwQDBApEAwRKBApECkQKRAMEA0QKBEMECkQKRAoESgQDRApEAAJdnQ3EA0QKRAMEAwRDBAMEA0QDBAMEQwQDBEMEAwQKRAMEQwQDBANEAwQDRAMEAwRDBApEAwQDBEMEAwQDRAMEA0QDBApEAwQKRApECkQKRAMEAwRKBANECgRKBEoECkQDBEoEAAJd3Q3EAwRKBEMEAwQDRAMEAwRDBAMEA0QDBAMEQwQKRAMEA0QDBAMEQwQDBANEAwQDRAoEQwQDBANEAwQDBEMEAwQDRApEAwQKRApECgRKBEMEAwQKRAMESgQKRApECkQDBApEAAJd3Q3EAwQKRANEAwQDBEMEAwQDRAMEAwRDBAMEA0QKRAMEAwRDBAMEA0QDBAMEQwQDBApEA0QDBAMEQwQDBANEAwQDRAoEQwQKRAoESgQKRANEAwQKRAMECkQKRApECkQDBApEAAJd3Q3EAwQKRAMEA0QDBANEAwQDBEMEAwQDRAMEAwRKBEMEAwQDRAMEAwRDBAMEA0QDBApEAwRDBAMEA0QDBAMEQwQDBApEA0QKBEoECkQKRAMEQwQKRAMECkQKRAoESgRDBApEAAJd3M3EQwQKRAMEA0QDBAMEA0QDBANEAwQDBEMEAwQKRANEAwQDBEMEAwQDRAMEAwRDBApEAwQDRAMEAwRDBAMEA0QDBApEAwQKRApECkQKRAMEAwRKBEMECkQKBEoECkQDRAoEQAJdnQ3EA0QKBEMEAwQDRAMEA0QDBAMEQwQDBANEAwQKRAMEA0QDBANEAwQDBEMEAwQDRApEAwQDBEMEAwQDRAMEAwRDBApEAwQKRApECkQKBEMEAwQKRANECgRKBApECkQDBEoEAAJd3Q3EAwRKBANEAwQDBEMEAwRDBAMEA0QDBAMEQwQKRAMEAwRDBAMEQwQDBANEAwQDBEoEA0QDBANEAwQDBEMEAwQDRAoEQwQKRApECgRKBANEAwQKRAMESgQKRApECkQDBApEAAJd3Q3EAwQKRAMEQwQDBANEAwQDBEMEAwRDBAMEA0QKBEMEAwQDRAMEA0QDBAMEQwQDBApEAwRDBAMEA0QDBANEAwQDBEoEA0QKRAoESgQKRAMEQwQKRAMECkQKRApECgRDBApEAANBQAAAAA="
      - service: media_player.turn_off
        data:
          entity_id: media_player.receiver
      - service: media_player.media_stop
        data:
          entity_id: media_player.apple_tv
